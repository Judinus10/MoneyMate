<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>Transactions</title>
    <link rel="stylesheet" href="/css/style.css"> <!-- Optional -->
</head>

<body>
    <h1>Transactions for User [[${userId}]]</h1>

    <form action="/transactions/add" method="post">
        <input type="hidden" name="userId" value="${userId}" />

        <label>Amount:</label>
        <input type="number" name="amount" inputmode="decimal" required />

        <label>Type:</label>
        <select name="type" required>
            <option value="income">Income</option>
            <option value="expense">Expense</option>
        </select>

        <label>Category:</label>
        <select name="category" required>
            <option value="Food">Food</option>
            <option value="Transport">Transport</option>
            <option value="Health">Health</option>
            <option value="Education">Education</option>
            <option value="Shopping">Shopping</option>
            <option value="Other">Other</option>
        </select>

        <label>Date:</label>
        <input type="date" name="date" th:max="${today}" required />

        <label>Description:</label>
        <input type="text" name="description" />

        <button type="submit">Add Transaction</button>
    </form>

    <h2>Transaction List</h2>
    <table border="1">
        <tr>
            <th>ID</th>
            <th>Amount</th>
            <th>Type</th>
            <th>Category</th>
            <th>Date</th>
            <th>Description</th>
            <th>Action</th>
        </tr>
        <tr th:each="tx : ${transactions}">
            <td th:text="${tx.id}">1</td>
            <td th:text="${tx.amount}">100.00</td>
            <td th:text="${tx.type}">income</td>
            <td th:text="${tx.category}">Salary</td>
            <td th:text="${tx.date}">2025-06-04</td>
            <td th:text="${tx.description}">June Pay</td>
            <td>
                <form method="post" th:action="@{'/transactions/delete/' + ${tx.id}}">
                    <button type="submit">Delete</button>
                </form>
            </td>
        </tr>
    </table>
    <script>
        window.onload = function () {
            const today = new Date().toISOString().split("T")[0];
            document.getElementsByName("date")[0].setAttribute("max", today);
        };
    </script>
</body>

</html>